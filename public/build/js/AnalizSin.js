const TOKEN={SUMA:10,RESTA:20,MULTI:30,DIV:40,PARENL:50,PARENR:60,ESPACIO:70,NUM:80,FIN:0};function cargarAutomata(){return cargarAutomataDesdeArchivo("/Compiladores MVC/afdCalculadora.txt")}function gramaticaAutomata(){const e=cargarAutomata(),n=new AnalizadorLexico("",e);function a(e){const n={val:0},a={name:"E",children:[]},t=r(n);if(t.val){e.val=n.val,a.children.push(t.tree);const r=l(e);return r.val&&a.children.push(r.tree),{val:!0,tree:a}}return{val:!1,tree:a}}function l(e){const a=n.yylex(),t={name:"E'",children:[]},o={val:0};if(a===TOKEN.SUMA||a===TOKEN.RESTA){const n=r(o);if(n.val){e.val+=a===TOKEN.SUMA?o.val:-o.val,t.children.push(n.tree,{name:a===TOKEN.SUMA?"+":"-"});const r=l(e);return r.val&&t.children.push(r.tree),{val:!0,tree:t}}return{val:!1,tree:t}}return n.undoToken(),t.children.push({name:"ε"}),{val:!0,tree:t}}function r(e){const n={val:0},a={name:"T",children:[]},l=o(n);if(l.val){e.val=n.val,a.children.push(l.tree);const r=t(e);return r.val&&a.children.push(r.tree),{val:!0,tree:a}}return{val:!1,tree:a}}function t(e){const a=n.yylex(),l={name:"T'",children:[]},r={val:0};if(a===TOKEN.MULTI||a===TOKEN.DIV){const n=o(r);if(n.val){e.val=a===TOKEN.MULTI?e.val*r.val:e.val/r.val,l.children.push(n.tree,{name:a===TOKEN.MULTI?"*":"/"});const o=t(e);return o.val&&l.children.push(o.tree),{val:!0,tree:l}}return{val:!1,tree:l}}return n.undoToken(),l.children.push({name:"ε"}),{val:!0,tree:l}}function o(e){const l=n.yylex(),r={name:"F",children:[]};if(l===TOKEN.PARENL){const l=a(e);return l.val&&n.yylex()===TOKEN.PARENR?(r.children.push({name:"("},l.tree,{name:")"}),{val:!0,tree:r}):{val:!1,tree:r}}return l===TOKEN.NUM?(e.val=parseFloat(n.getLexema()),r.children.push({name:"num",children:[{name:`${e.val}`}]}),{val:!0,tree:r}):(n.undoToken(),{val:!1,tree:r})}function c(e){let n="";if(e.children)for(const a of e.children)n+=c(a)+" ";return["E","E'","T","T'","F","ε","num","(",")"].includes(e.name)||(n+=e.name+" "),n.trim()}function i(e){n.setSigma(e);const l={val:0},r=a(l);if(r.val&&n.yylex()===TOKEN.FIN){return{valid:!0,postfijo:c(r.tree).trim(),resultado:l.val}}return{valid:!1,postfijo:"",resultado:0}}var u;u="/Compiladores MVC/afdCalculadora.txt",fs.writeFileSync(u,"","utf-8"),function(){const e=["((1+2)*3)","2+1"];for(const n of e){console.log(`Cadena: "${n}"`);const e=i(n);e.valid?(console.log("Cadena: Válida"),console.log(`Resultado: ${e.resultado}`),console.log(`Posfijo: ${e.postfijo}\n`)):console.log("Cadena: Inválida\n")}}()}