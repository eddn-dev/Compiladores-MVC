function handleAplicarOpcional(e){handleAFNModal(e,{fields:[{name:"afnId",selector:"#automaton-id",alertSelector:"#automaton-id-alert",validate:e=>e?null:"Selecciona un AFN."}],validationEvent:"change",populateAFNSelects:!0,onSubmit:(a,n)=>{const o=a.afnId.value,i=AFNS.findIndex((e=>e.ID_AFN===o));AFNS[i].Opcional(),actualizarSelectsDeAFN(),mostrarNotificacion("Operador opcional aplicado exitosamente.","success"),closeModal(e)},successMessage:"Operador opcional aplicado exitosamente.",errorMessage:"Por favor, corrige los errores antes de continuar."}),bindAFNSelectionChange("#automaton-id","#preview-afn");const a=e.querySelector("#automaton-id");function n(){const e=a.value;if(e){const a=AFNS.find((a=>a.ID_AFN===e)).clone();a.Opcional(),updateAFNPreview("#preview-result",a)}else updateAFNPreview("#preview-result",null)}a.addEventListener("change",(()=>{updateAFNPreview("#preview-afn",AFNS.find((e=>e.ID_AFN===a.value))),n()})),updateAFNPreview("#preview-afn",AFNS.find((e=>e.ID_AFN===a.value))),n()}