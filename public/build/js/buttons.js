const modalsStack=[];function closeSpecificModal(e){const t=modalsStack.findIndex((t=>t.container.contains(e)));if(-1!==t){const{container:e,canvas:n}=modalsStack.splice(t,1)[0];if(n){const e=document.querySelector(`#${n.id}-container`);e&&(e.appendChild(n),n.style.width="",n.style.height="",n.classList.remove("clicked"),n.style.pointerEvents="")}e.remove(),0===modalsStack.length&&document.body.classList.remove("modal-open")}}document.addEventListener("closeModal",(function(e){closeSpecificModal(e.detail.modal)})),document.addEventListener("DOMContentLoaded",(()=>{function e(n,o=null){fetch(n).then((e=>e.text())).then((n=>{const c=document.createElement("div");if(c.classList.add("modal-container"),document.body.appendChild(c),c.innerHTML=n,o){const e=c.querySelector(".modal_canvas_container");e&&(e.appendChild(o),o.style.width="100%",o.style.height="100%",o.classList.add("clicked"),o.style.pointerEvents="none")}document.body.classList.add("modal-open");const l=c.querySelector(".blur");l&&l.classList.add("slide-in-fwd-center"),modalsStack.push({container:c,canvas:o}),function(n){const o=n.querySelector(".blur"),c=n.querySelector(".modal_close"),l=n.querySelector(".modal"),a=n.querySelector(".modal_button.cancel"),i=n.querySelectorAll(".button_option");function d(e){e.target.classList.contains("blur")&&t()}function s(e){e.stopPropagation(),t()}function r(e){e.preventDefault(),t()}function u(e){e.stopPropagation()}n._eventHandlers={onBlurClick:d,onCloseButtonClick:s,onCancelButtonClick:r,stopPropagation:u},o&&o.addEventListener("click",d);c&&c.addEventListener("click",s);a&&a.addEventListener("click",r);l&&l.addEventListener("click",u);i.forEach((t=>{t.addEventListener("click",(()=>{e(`/modal-option-${t.getAttribute("data-option-id")}`)}))}))}(c);const a=c.querySelector(".modal");if(a){const e=new CustomEvent("modalLoaded",{detail:{modal:a}});document.dispatchEvent(e)}})).catch((e=>{console.error("Error al cargar el modal:",e)}))}function t(){if(0===modalsStack.length)return;const{container:e,canvas:t}=modalsStack.pop();if(function(e){const t=e.querySelector(".blur"),n=e.querySelector(".modal_close"),o=e.querySelector(".modal"),c=e.querySelector(".modal_button.cancel"),{onBlurClick:l,onCloseButtonClick:a,onCancelButtonClick:i,stopPropagation:d}=e._eventHandlers||{};t&&l&&t.removeEventListener("click",l);n&&a&&n.removeEventListener("click",a);c&&i&&c.removeEventListener("click",i);o&&d&&o.removeEventListener("click",d);delete e._eventHandlers}(e),t){const e=document.querySelector(`#${t.id}-container`);e&&(e.appendChild(t),t.style.width="",t.style.height="",t.classList.remove("clicked"),t.style.pointerEvents="")}const n=e.querySelector(".blur");n?(n.classList.remove("slide-in-fwd-center"),n.classList.add("slide-out-fwd-center"),n.addEventListener("animationend",(function t(o){"slide-out-fwd-center"===o.animationName&&(e.remove(),n.removeEventListener("animationend",t),0===modalsStack.length&&document.body.classList.remove("modal-open"))}))):(e.remove(),0===modalsStack.length&&document.body.classList.remove("modal-open"))}document.querySelectorAll(".sphere_button").forEach((t=>{t.addEventListener("click",(()=>{e(`/modal${t.id.replace("sphere","")}`,t)}))}))}));