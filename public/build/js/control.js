const AFNS=[];function handleModal(e){switch(e.getAttribute("id")){case"modal2":handleObtenerAFD(e);break;case"modal3":handleProbarAFD(e);break;case"modal8":handleCrearAFNBasico(e);break;case"modal9":handleUnirAFN(e);break;case"modal10":handleConcatenarAFN(e);break;case"modal11":handleAplicarCerraduraKleene(e);break;case"modal12":handleAplicarCerraduraPositiva(e);break;case"modal13":handleAplicarOpcional(e);break;case"modal14":handleAplicarERaAFN(e);break;case"modal15":handleCalculadora(e)}}function handleAFNModal(e,a){const t=e.querySelector("form"),n=t.querySelector(".modal_button.accept"),o=t.querySelector(".modal_button.cancel"),c={},l={};function r(){let e=!0;return a.fields.forEach((a=>{const t=l[a.name].value,n=c[a.name];if(n&&(n.textContent="",n.classList.remove("error")),a.validate){const o=a.validate(t,l);o&&(e=!1,n&&(n.textContent=o,n.classList.add("error")))}})),e}a.fields.forEach((e=>{l[e.name]=t.querySelector(e.selector),e.alertSelector&&(c[e.name]=t.querySelector(e.alertSelector))})),n.disabled=!0,a.populateAFNSelects&&actualizarSelectsDeAFN(l),t.addEventListener(a.validationEvent||"input",(()=>{const e=r();n.disabled=!e})),t.addEventListener("submit",(n=>{n.preventDefault();r()?(a.onSubmit(l,t),mostrarNotificacion("Operación realizada exitosamente.","success"),closeModal(e)):mostrarNotificacion("Por favor, corrige los errores antes de continuar.","error")})),o.addEventListener("click",(()=>{closeModal(e)}))}function esCaracterValido(e){if(1!==e.length)return!1;const a=e.charCodeAt(0);return a>=32&&a<=254}function closeModal(e){const a=new CustomEvent("closeModal",{detail:{modal:e}});document.dispatchEvent(a)}function actualizarSelectsDeAFN(e=null){if(e){for(const a in e)if("SELECT"===e[a].tagName){const t=e[a];t.innerHTML='<option value="">Sin selección</option>',AFNS.forEach((e=>{const a=document.createElement("option");a.value=e.ID_AFN,a.textContent=e.ID_AFN,t.appendChild(a)}))}}else{document.querySelectorAll('select[name^="automaton-id"]').forEach((e=>{e.innerHTML='<option value="">Sin selección</option>',AFNS.forEach((a=>{const t=document.createElement("option");t.value=a.ID_AFN,t.textContent=a.ID_AFN,e.appendChild(t)}))}))}}function mostrarNotificacion(e,a="success"){const t=document.getElementById("notification-container"),n=document.createElement("div");n.classList.add("notification",a,"scale-in-center");const o=`\n      <h2>${"success"===a?"Éxito":"Error"}</h2>\n      <p>${e}</p>\n    `;n.innerHTML=o,t.appendChild(n),setTimeout((()=>{n.classList.remove("scale-in-center"),n.classList.add("scale-out-center"),n.addEventListener("animationend",(()=>{t.removeChild(n)}))}),2500)}document.addEventListener("modalLoaded",(function(e){const a=e.detail.modal;handleModal(a),console.log("modal"+a.getAttribute("id"))}));