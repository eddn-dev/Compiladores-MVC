const AFNS=[];function handleModal(e){switch(e.getAttribute("id")){case"modal2":handleObtenerAFD(e);break;case"modal3":handleProbarAFD(e);break;case"modal8":handleCrearAFNBasico(e);break;case"modal9":handleUnirAFN(e);break;case"modal10":handleConcatenarAFN(e);break;case"modal11":handleAplicarCerraduraKleene(e);break;case"modal12":handleAplicarCerraduraPositiva(e);break;case"modal13":handleAplicarOpcional(e);break;case"modal14":handleAplicarERaAFN(e)}}function handleAFNModal(e,t){const a=e.querySelector("form"),n=a.querySelector(".modal_button.accept"),o=a.querySelector(".modal_button.cancel"),c={},r={};function l(){let e=!0;return t.fields.forEach((t=>{const a=r[t.name].value.trim(),n=c[t.name];if(n&&(n.textContent="",n.classList.remove("error")),t.validate){const o=t.validate(a,r);o&&(e=!1,n&&(n.textContent=o,n.classList.add("error")))}})),e}t.fields.forEach((e=>{r[e.name]=a.querySelector(e.selector),e.alertSelector&&(c[e.name]=a.querySelector(e.alertSelector))})),n.disabled=!0,t.populateAFNSelects&&actualizarSelectsDeAFN(r),a.addEventListener(t.validationEvent||"input",(()=>{const e=l();n.disabled=!e})),a.addEventListener("submit",(n=>{n.preventDefault();l()?(t.onSubmit(r,a),mostrarNotificacion("Operación realizada exitosamente.","success"),closeModal(e)):mostrarNotificacion("Por favor, corrige los errores antes de continuar.","error")})),o.addEventListener("click",(()=>{closeModal(e)}))}function esCaracterValido(e){if(1!==e.length)return!1;const t=e.charCodeAt(0);return t>=32&&t<=126}function closeModal(e){const t=new CustomEvent("closeModal",{detail:{modal:e}});document.dispatchEvent(t)}function actualizarSelectsDeAFN(e=null){if(e){for(const t in e)if("SELECT"===e[t].tagName){const a=e[t];a.innerHTML='<option value="">Sin selección</option>',AFNS.forEach((e=>{const t=document.createElement("option");t.value=e.ID_AFN,t.textContent=e.ID_AFN,a.appendChild(t)}))}}else{document.querySelectorAll('select[name^="automaton-id"]').forEach((e=>{e.innerHTML='<option value="">Sin selección</option>',AFNS.forEach((t=>{const a=document.createElement("option");a.value=t.ID_AFN,a.textContent=t.ID_AFN,e.appendChild(a)}))}))}}function mostrarNotificacion(e,t="success"){const a=document.getElementById("notification-container"),n=document.createElement("div");n.classList.add("notification",t,"scale-in-center");const o=`\n      <h2>${"success"===t?"Éxito":"Error"}</h2>\n      <p>${e}</p>\n    `;n.innerHTML=o,a.appendChild(n),setTimeout((()=>{n.classList.remove("scale-in-center"),n.classList.add("scale-out-center"),n.addEventListener("animationend",(()=>{a.removeChild(n)}))}),2500)}document.addEventListener("modalLoaded",(function(e){const t=e.detail.modal;handleModal(t),console.log("modal"+t.getAttribute("id"))}));