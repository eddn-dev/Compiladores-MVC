function handleCrearAFNBasico(e){let a=null;function o(a){const o=e.querySelector(".automaton_preview"),t=[],r=[];if(a){const o=a.Edo_Inicial,l=[...a.Edos_Acept][0],s=e.querySelector("#start-symbol").value;t.push({data:{id:o.Id_Edo.toString(),label:o.Id_Edo.toString()}}),t.push({data:{id:l.Id_Edo.toString(),label:l.Id_Edo.toString(),shape:"star",color:"red"}}),r.push({data:{source:o.Id_Edo.toString(),target:l.Id_Edo.toString(),label:s}})}cytoscape({container:o,elements:{nodes:t,edges:r},style:[{selector:"node",style:{label:"data(label)","background-color":"#666",color:"#fff","text-valign":"center",width:"40px",height:"40px"}},{selector:"edge",style:{label:"data(label)","curve-style":"bezier","target-arrow-shape":"triangle",width:2,"line-color":"#9dbaea","target-arrow-color":"#9dbaea"}},{selector:".estadoAceptacion",style:{"background-color":"#c0392b",shape:"star"}}],layout:{name:"grid",rows:2}})}handleAFNModal(e,{fields:[{name:"automatonId",selector:"#automaton-id",alertSelector:"#automaton-id-alert",validate:e=>e?/^[0-9]+$/.test(e)?AFNS.some((a=>a.ID_AFN===e))?"El ID ya existe. Elige otro.":null:"El ID solo puede contener números.":"El ID es obligatorio."},{name:"startSymbol",selector:"#start-symbol",alertSelector:"#start-symbol-alert",validate:e=>e?esCaracterValido(e)?null:"El símbolo de inicio debe ser un carácter válido.":"El símbolo de inicio es obligatorio."},{name:"endSymbol",selector:"#end-symbol",alertSelector:"#end-symbol-alert",validate:(e,a)=>{const o=a.startSymbol.value;if(e){if(!esCaracterValido(e))return"El símbolo de final debe ser un carácter válido o estar vacío.";if(o&&o>e)return"El símbolo final no puede ser menor que el símbolo inicial (valor ASCII)."}return null}}],onSubmit:(e,o)=>{const t=e.automatonId.value.trim(),r=e.startSymbol.value,l=e.endSymbol.value||null;a=AFN.Crear_Basico_AFN(r,l),a.ID_AFN=t;switch(o.querySelector('input[name="cerradura"]:checked').value){case"kleene":a.Cerradura_Kleene();break;case"epsilon":a.Cerradura_Positiva()}AFNS.push(a),actualizarSelectsDeAFN()},successMessage:"AFN básico creado exitosamente.",errorMessage:"Por favor, corrige los errores antes de continuar."}),o(null);e.querySelectorAll('input[type="text"]').forEach((t=>{t.addEventListener("keyup",(()=>{const t=obtenerValoresDeCampos(e);if(t.automatonId.isValid&&t.startSymbol.isValid&&t.endSymbol.isValid)try{a=AFN.Crear_Basico_AFN(t.startSymbol.value,t.endSymbol.value||null),a.ID_AFN=t.automatonId.value.trim();switch(e.querySelector('input[name="cerradura"]:checked').value){case"kleene":a.Cerradura_Kleene();break;case"epsilon":a.Cerradura_Positiva()}o(a)}catch(e){console.error("Error al crear el AFN:",e)}else!function(){const a=e.querySelector(".automaton_preview");cytoscape({container:a,elements:[]})}()}))}))}function obtenerValoresDeCampos(e){const a={};return a.automatonId={value:e.querySelector("#automaton-id").value.trim(),isValid:!0},a.startSymbol={value:e.querySelector("#start-symbol").value,isValid:!0},a.endSymbol={value:e.querySelector("#end-symbol").value,isValid:!0},a}